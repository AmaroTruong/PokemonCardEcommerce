{% extends "headerAndFooterLogged.html" %}
{% block title %}
<title>Settings</title>
{% endblock %}
{% block header %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="/static/catalogue.css">
{% endblock %}
{% block content %}
<div class="settings-container">
    <h2>User Information</h2>
    <form id="form" method="POST" action="/settings">
        <div>
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" value="{{ user.username }}" readonly>
        </div>
        <div>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" readonly>
        </div>
        <div>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" value="{{ user.password }}" readonly>
            <button type="button" onclick="revealPassword()">Reveal</button>
        </div>
        <div id="make-changes-container">
            <button type="button" onclick="enableTextboxes()">Make Changes</button>
        </div>
        <div id="save-changes-container" style="display: none;">
            <button type="submit" id="save-changes-btn">Save Changes</button>
        </div>
        <p></p>
    </form>
    
    <div class="section-divider">
        <hr class="divider-line">
        <div class="payment-options">
            <h2 class="divider-text">Payment Options</h2>
                <h3>Add New Payment Option</h3>
                <div>
                    <label for="card-number">Card Number:</label>
                    <input type="text" id="card-number" name="card-number" placeholder="Enter Card Number">
                </div>
                <div>
                    <label for="card-name">Cardholder Name:</label>
                    <input type="text" id="card-name" name="card-name" placeholder="Enter Cardholder Name">
                </div>
                <div>
                    <label for="expiration-date">Expiration Date:</label>
                    <input type="text" id="expiration-date" name="expiration-date" placeholder="MM/YY">
                </div>
                <div>
                    <label for="cvv">CVV Number:</label>
                    <input type="text" id="cvv" name="cvv" placeholder="Enter CVV Number">
                </div>
                <div>
                    <button type="button">Save Card</button>
            </div>
            <p></p>
        </div>
        <hr class="divider-line">
    </div>
    <div>
    </div>
    
    <div class="section-divider">
        <hr class="divider-line">
        <h2 class="divider-text">Favorite Cards</h2>
        <hr class="divider-line">
    </div>

    <div class="section-divider">
        <hr class="divider-line">
        <div class="payment-options">
            <h2>Delivery Options</h2>
            <form id="form-delivery" method="POST" action="/settings/delivery">
    <div>
        <label for="address1">Address 1:</label>
        <input type="text" id="address1" name="address1" placeholder="Enter Address 1" readonly>
    </div>
    <div>
        <label for="address2">Address 2:</label>
        <input type="text" id="address2" name="address2" placeholder="Enter Address 2" readonly>
    </div>
    <div>
        <label for="country">Country:</label>
        <input type="text" id="country" name="country" placeholder="Enter Country" readonly>
    </div>
    <div>
        <label for="city">City:</label>
        <input type="text" id="city" name="city" placeholder="Enter City" readonly>
    </div>
    <div>
        <label for="zip-code">Zip Code:</label>
        <input type="text" id="zip-code" name="zip-code" placeholder="Enter Zip Code" readonly>
    </div>
    <div>
        <label for="phone-number">Phone Number:</label>
        <input type="tel" id="phone-number" name="phone-number" placeholder="Enter Phone Number" readonly>
    </div>
    <div id="make-changes">
        <button type="button" onclick="enableDeliveryTextboxes()">Make Changes</button>
    </div>
    <div id="save-changes" style="display: none;">
        <button type="submit" id="save-changes">Save Changes</button>
    </div>
    <p></p>
</form>
        <hr class="divider-line">
    </div>
        <hr class="divider-line">
    </div>
    </div>

<script>
    function enableTextboxes() {
    document.getElementById("username").readOnly = false;
    document.getElementById("email").readOnly = false;
    document.getElementById("password").readOnly = false;
    document.getElementById("make-changes-container").style.display = "none";
    document.getElementById("save-changes-container").style.display = "block";
}

function enableDeliveryTextboxes() {
    document.getElementById("address1").readOnly = false;
    document.getElementById("address2").readOnly = false;
    document.getElementById("country").readOnly = false;
    document.getElementById("city").readOnly = false;
    document.getElementById("zip-code").readOnly = false;
    document.getElementById("phone-number").readOnly = false;
    document.getElementById("make-changes").style.display = "none";
    document.getElementById("save-changes").style.display = "block";
}

    function revealPassword() {
        var passwordInput = document.getElementById('password');
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
        } else {
            passwordInput.type = 'password';
        }
    }

    function saveChanges() {
    document.getElementById("form").submit();
}

function saveDelivChanges() {
    document.getElementById("form-delivery").submit();
}

function enableDeliveryOptions() {
    var deliveryOptionsForm = document.getElementById("delivery-options-form");
    var changesButtonsContainer = document.getElementById("changes-buttons-container");
    var saveChangesContainer = document.getElementById("save-changes-container");

    var textboxes = deliveryOptionsForm.getElementsByTagName("input");
    for (var i = 0; i < textboxes.length; i++) {
        textboxes[i].readOnly = false;
    }

    changesButtonsContainer.style.display = "none";
    saveChangesContainer.style.display = "block";
}
</script>
{% endblock %}
{% block footer %}
{{ super() }}
{% endblock %}
{% block script %}
{{ super() }}
{% endblock %}